# Microchip MEC5 ESPI driver configuration

# Copyright (c) 2024 Microchip Technologies Inc.
# SPDX-License-Identifier: Apache-2.0

config ESPI_MEC5
	bool "Microchip MEC5 family ESPI driver"
	depends on DT_HAS_MICROCHIP_MEC5_ESPI_ENABLED
	help
	  Enable the Microchip MEC5 family ESPI driver.

if ESPI_MEC5

config ESPI_OOB_CHANNEL
	default y

config ESPI_FLASH_CHANNEL
	default y

config ESPI_PERIPHERAL_HOST_IO
	default y

config ESPI_PERIPHERAL_HOST_IO_PVT
	default  y

config ESPI_PERIPHERAL_HOST_MAILBOX
	default  y

config ESPI_PERIPHERAL_DEBUG_PORT_80
	default y

config ESPI_PERIPHERAL_UART
	default y

config ESPI_PERIPHERAL_UART_SOC_MAPPING
	int "SoC port exposed as logical eSPI UART"
	default 1
	depends on ESPI_PERIPHERAL_UART
	help
	  This tells the driver to which SoC UART to direct the UART traffic
	  send over eSPI from host.

config ESPI_OOB_BUFFER_SIZE
	int "eSPI OOB channel buffer size in bytes"
	default 128
	depends on ESPI_OOB_CHANNEL
	help
	  Use minimum RAM buffer size by default but allow applications to
	  override the value.
	  Maximum OOB payload is 73 bytes.

config ESPI_FLASH_BUFFER_SIZE
	int "eSPI Flash channel buffer size in bytes"
	default 256
	depends on ESPI_FLASH_CHANNEL
	help
	  Use maximum RAM buffer size defined by spec but allow applications
	  to override if eSPI host doesn't support it.

config ESPI_MEC5_PERIPHERAL_ACPI_SHD_MEM_SIZE
	int "Host I/O peripheral port size for shared memory in MEC5 series"
	depends on ESPI_MEC5 || ESPI_PERIPHERAL_ACPI_SHM_REGION
	default 256
	help
	  This is the port size used by the Host and EC to communicate over
	  the shared memory region to return the ACPI response data.

config ESPI_MEC5_PERIPHERAL_HOST_CMD_PARAM_SIZE
	int "Host I/O peripheral port size for ec host command in MEC5 series"
	depends on ESPI_MEC5 || ESPI_PERIPHERAL_EC_HOST_CMD
	default 256
	help
	  This is the port size used by the Host and EC to communicate over
	  the shared memory region to return the host command parameter data.

config ESPI_PERIPHERAL_ACPI_EC_IBF_EVT_DATA
	bool "Read ACPI EC Event Data in IBF ISR"
	depends on ESPI_PERIPHERAL_CHANNEL
	help
	  Enable reading event data in ACPI EC IBF ISR. This is used in OS
	  environment where application expects IBF ISR to read data and pass
	  to callback.

if ESPI_PERIPHERAL_8042_KBC

config ESPI_PERIPHERAL_KBC_IBF_EVT_DATA
	bool "KBC event data format in IBF"
	help
	  Enable espi_evt_data_kbc format for encoding event in KBC IBF ISR

config ESPI_PERIPHERAL_KBC_OBE_CBK
	bool "KBC OBE Callback"
	help
	  Enable KBC OBE callback from OBE ISR

endif #ESPI_PERIPHERAL_8042_KBC

if ESPI_PERIPHERAL_ACPI_EC_IBF_EVT_DATA

config ESPI_PERIPHERAL_ACPI_EC_IBF_HANDSHAKE_UD0
	bool "Select UD0 as the handshake bit between OS and ACPI EC"
	help
	  For ACPI_EC IBF event data use hardware status UD0 bit as a
	  handshake bit between OS and ACPI EC.

config ESPI_PERIPHERAL_ACPI_EC_IBF_HANDSHAKE_UD1
	bool "Select UD1 as the handshake bit between OS and ACPI EC"
	help
	  For ACPI_EC IBF event data use hardware status UD1 bit as a
	  handshake bit between OS and ACPI EC.

endif #ESPI_PERIPHERAL_ACPI_EC_IBF_EVT_DATA

config ESPI_TAF_MEC5
	bool "Microchip MEC5 ESPI TAF driver"
	default y
	depends on DT_HAS_MICROCHIP_MEC5_ESPI_TAF_ENABLED
	help
	  Enable the Microchip XEC TAF ESPI driver for MEC15xx family.

if ESPI_TAF_MEC5

config ESPI_TAF_MEC5_RESET_ON_INIT
	bool "Microchip MEC5 ESPI TAF reset during driver initialization"
	default n
	help
	  Soft reset MEC5 eSPI TAF controller at driver initialization

config ESPI_TAF_MEC5_EC_PORTAL_XFR_TIMEOUT_US
	int "MEC5 eSPI TAF application initiated transfer timeout"
	default 100000
	help
	 Timeout in microseconds for TAF flash read, erase, and
	 program operations initiated by the EC application.

config ESPI_TAF_MEC5_RPMC_SUPPORT
	bool "Enable MEC5 eSPI TAF HW RPMC support and API"
	default n
	depends on SOC_SERIES_MEC174X || SOC_SERIES_MEC175X
	help
	  Enable vendor specific driver API to send RPMC OP1 and
	  OP2 commands to the target attached RPMC flash device.

config ESPI_TAF_MEC5_ASYNC
	bool "Enable asynchronous operation for TAF read, write, and erase"
	default n
	help
	 If enabled TAF driver will look at ASYNC flag passed to read, write,
	 and erase APIs. If ASYNC flag is set these APIs will return after
	 starting operation. Application should register a callback to receive
	 notification the operation has finished.

endif #ESPI_TAF_MEC5
endif #ESPI_MEC5
