# Copyright (c) 2024 Microchip Technology Inc.
# SPDX-License-Identifier: Apache-2.0

description: Microchip MEC5 HAL based I2C/SMB with Network Layer controller

compatible: "microchip,mec5-i2c-nl"

include: [i2c-controller.yaml, pinctrl-device.yaml]

properties:
  reg:
    required: true

  pinctrl-0:
    required: true

  pinctrl-names:
    required: true

  port_sel:
    type: int
    description: Port mux number matching pinctrl-0 pins.
    required: true

  scl-gpios:
    type: phandle-array
    required: true
    description: I2C clock line gpio info

  sda-gpios:
    type: phandle-array
    required: true
    description: I2C data line gpio handle

  init-pin-wait:
    type: int
    default: 100
    description: |
      Amount of time in microseconds allowing the controller to sample
      pins during driver initialization. If not present default is 100.

  config-pin-wait:
    type: int
    default: 35000
    description: |
      Amount of time in microseconds allowing the controller to sample
      pins after controller is enabled during configuration. If not
      present the default is 35000 (the SMBus bus timeout).

  cm-dma-chan:
    type: int
    required: true
    description: DMA channel used by I2C-NL for Controller mode transfers.

  cm-dma-req-id:
    type: int
    required: true
    description: |
      I2C Controller mode hardware flow control ID required by DMA channel.

  tm-dma-chan:
    type: int
    required: true
    description: |
      DMA channel used by I2C-NL for Target mode transfers.

  tm-dma-req-id:
    type: int
    required: true
    description: |
      I2C Target mode hardware flow control ID required by DMA channel.

  cm-tx-buffer-size:
    type: int
    default: 64
    description: |
      Controller mode driver buffer size in bytes. CM buffer used to
      build transmit data packet for initial I2C start. The driver
      will buffer as much of the transmit data into this buffer. Remaining
      data will be handling by TX DMA reload callback.

  tm-tx-buffer-size:
    type: int
    default: 64
    description: |
      Target mode driver transmit buffer size in bytes. TM mode requires
      a driver buffer to supply data requested by an external I2C controller
      read. Application fills this buffer via target mode callbacks.


  tm-rx-buffer-size:
    type: int
    default: 64
    description: |
      Target mode driver receive buffer size in bytes. TM mode requires
      a driver buffer to receive data transmitted by an external I2C controller
      write.
